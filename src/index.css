@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   NEURAL GLASS 2.0 - Deep Space Edition
   Lead UI Design System
   ============================================================ */

:root {
  --bg-deep:      #030014;
  --bg-surface:   #0f0728;
  --neon-primary: #7000ff;
  --neon-cyan:    #00f0ff;
  --neon-pink:    #ff005c;
  --glass-border: rgba(255, 255, 255, 0.08);
  --glass-shine:  rgba(255, 255, 255, 0.10);
}

@layer base {
  *, *::before, *::after { box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    font-family: 'Inter', system-ui, sans-serif;
    background-color: var(--bg-deep);
    background-image:
      radial-gradient(circle at 50% 0%, #2a1b5e 0%, transparent 60%),
      radial-gradient(circle at 100% 0%, #1a0b38 0%, transparent 40%),
      radial-gradient(circle at 0% 80%, #0d0626 0%, transparent 50%);
    background-attachment: fixed;
    color: #e2e8f0;
    overflow-x: clip;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
  }

  h1, h2, h3, h4, h5, h6, .brand-font, .font-brand {
    font-family: 'Space Grotesk', system-ui, sans-serif;
    letter-spacing: -0.02em;
  }

  ::selection {
    background: rgba(112, 0, 255, 0.4);
    color: #fff;
  }

  ::-webkit-scrollbar              { width: 5px; }
  ::-webkit-scrollbar-track        { background: var(--bg-deep); }
  ::-webkit-scrollbar-thumb        { background: rgba(112,0,255,0.4); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover  { background: rgba(112,0,255,0.7); }
}

@layer components {

  /* ── 1. CARD NEURAL ──────────────────────────────────────── */
  .card-neural {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    background: linear-gradient(180deg, rgba(20,10,40,0.75) 0%, rgba(10,5,20,0.45) 100%);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    box-shadow: 0 4px 24px -1px rgba(0,0,0,0.35), inset 0 1px 0 0 var(--glass-shine);
    transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
  }

  .card-neural::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(112,0,255,0.04) 0%, transparent 60%);
    pointer-events: none;
  }

  .card-neural:hover {
    border-color: rgba(112, 0, 255, 0.35);
    box-shadow:
      0 0 40px -8px rgba(112, 0, 255, 0.22),
      0 8px 32px -8px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 0 rgba(255, 255, 255, 0.18);
    transform: translateY(-3px);
  }

  .card-neural.card-danger:hover {
    border-color: rgba(255, 0, 92, 0.35);
    box-shadow: 0 0 40px -8px rgba(255,0,92,0.2), inset 0 1px 0 0 rgba(255,255,255,0.18);
  }

  .card-neural-highlight {
    border-color: rgba(112, 0, 255, 0.2);
    box-shadow: 0 0 40px -12px rgba(112,0,255,0.3), inset 0 1px 0 0 var(--glass-shine);
  }

  /* Legacy aliases */
  .glass-panel       { @apply card-neural; }
  .glass-panel-brand { @apply card-neural card-neural-highlight; }
  .glass-card        { @apply card-neural; }

  /* ── 2. BTN NEURAL ───────────────────────────────────────── */
  .btn-neural {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.625rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 600;
    font-size: 0.875rem;
    color: #fff;
    background: linear-gradient(90deg, #5b21b6 0%, #7c3aed 100%);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 20px -5px rgba(124,58,237,0.55), inset 0 1px 0 0 rgba(255,255,255,0.2);
    cursor: pointer;
    transition: all 0.25s ease;
    white-space: nowrap;
    text-decoration: none;
  }

  .btn-neural:hover {
    background: linear-gradient(90deg, #6d28d9 0%, #8b5cf6 100%);
    box-shadow: 0 0 35px -5px rgba(124,58,237,0.75), inset 0 1px 0 0 rgba(255,255,255,0.25);
    transform: translateY(-1px);
  }

  .btn-neural:active { transform: translateY(0); }

  .btn-neural-lg {
    @apply btn-neural;
    padding: 0.875rem 2.25rem;
    font-size: 1rem;
    border-radius: 1rem;
  }

  .btn-neural-danger {
    @apply btn-neural;
    background: linear-gradient(90deg, #9f1239 0%, #e11d48 100%);
    box-shadow: 0 0 20px -5px rgba(225,29,72,0.55), inset 0 1px 0 0 rgba(255,255,255,0.2);
  }

  .btn-neural-danger:hover {
    background: linear-gradient(90deg, #be123c 0%, #fb7185 100%);
    box-shadow: 0 0 35px -5px rgba(225,29,72,0.75), inset 0 1px 0 0 rgba(255,255,255,0.25);
  }

  /* Legacy aliases */
  .btn-primary    { @apply btn-neural; }
  .btn-primary-lg { @apply btn-neural-lg; }
  .btn-danger     { @apply btn-neural-danger; }

  /* ── 3. BTN GHOST NEURAL ─────────────────────────────────── */
  .btn-ghost-neural {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.625rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 500;
    font-size: 0.875rem;
    color: #94a3b8;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.07);
    backdrop-filter: blur(8px);
    cursor: pointer;
    transition: all 0.25s ease;
    white-space: nowrap;
    text-decoration: none;
  }

  .btn-ghost-neural:hover {
    background: rgba(255, 255, 255, 0.09);
    border-color: rgba(255, 255, 255, 0.14);
    color: #f8fafc;
    box-shadow: 0 0 15px rgba(255,255,255,0.04);
  }

  /* Legacy alias */
  .btn-ghost  { @apply btn-ghost-neural; }

  /* ── 4. BADGES ───────────────────────────────────────────── */
  .badge-base {
    display: inline-flex;
    align-items: center;
    gap: 0.3rem;
    padding: 0.2rem 0.65rem;
    border-radius: 0.35rem;
    font-size: 0.6rem;
    font-weight: 700;
    letter-spacing: 0.07em;
    text-transform: uppercase;
    backdrop-filter: blur(8px);
  }

  .badge-pending  { @apply badge-base; background: rgba(100,116,139,0.12); border: 1px solid rgba(100,116,139,0.2); color: #94a3b8; }
  .badge-success  { @apply badge-base; background: rgba(16,185,129,0.12);  border: 1px solid rgba(16,185,129,0.25);  color: #6ee7b7; }
  .badge-primary  { @apply badge-base; background: rgba(112,0,255,0.15);   border: 1px solid rgba(112,0,255,0.3);    color: #c4b5fd; }
  .badge-danger   { @apply badge-base; background: rgba(255,0,92,0.12);    border: 1px solid rgba(255,0,92,0.25);    color: #fda4af; }

  .neon-badge         { @apply badge-pending; }
  .neon-badge-success { @apply badge-success; }

  /* Legacy compat */
  .badge { @apply badge-base; }

  /* ── 5. STAT BAR / PROGRESS ──────────────────────────────── */
  .stat-bar-track {
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.06);
    border-radius: 9999px;
    overflow: hidden;
  }

  .stat-bar-fill {
    height: 100%;
    border-radius: 9999px;
    background: linear-gradient(90deg, #7000ff, #00f0ff);
    box-shadow: 0 0 8px rgba(0,240,255,0.5);
    transition: width 0.9s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .progress-bar-glow { box-shadow: 0 0 10px rgba(0,240,255,0.5); }

  /* ── 6. NEURAL DIVIDER ───────────────────────────────────── */
  .neural-divider {
    width: 100%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(112, 0, 255, 0.4) 30%,
      rgba(0, 240, 255, 0.5) 50%,
      rgba(112, 0, 255, 0.4) 70%,
      transparent 100%
    );
  }

  /* ── 7. NAV ──────────────────────────────────────────────── */
  .nav-neural {
    background: rgba(3, 0, 20, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 1px 0 0 rgba(112,0,255,0.1);
  }

  /* ── 8. ICON BOX ─────────────────────────────────────────── */
  .icon-box {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 0.625rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.07);
    transition: background 0.25s ease, border-color 0.25s ease;
  }

  .card-neural:hover .icon-box {
    background: rgba(112, 0, 255, 0.12);
    border-color: rgba(112, 0, 255, 0.3);
  }

  .card-icon-wrapper { @apply icon-box; }
  .glass-button      { @apply btn-ghost-neural; }

  /* ── 9. IIY NAVBAR (tests parity) ─────────────────────────── */
  .iiy-logo, .iiy-logo * { box-sizing: border-box; margin: 0; padding: 0; }
  .iiy-logo { display: inline-flex; align-items: center; gap: 14px; text-decoration: none; user-select: none; }
  .iiy-logo .iiy-signet svg { display: block; width: 44px; height: 44px; }
  .iiy-logo .iiy-wordmark { display: flex; flex-direction: column; }
  .iiy-logo .iiy-title {
    font-family: 'Orbitron', monospace;
    font-weight: 900;
    font-size: 19px;
    letter-spacing: 7px;
    line-height: 1;
    text-transform: uppercase;
    background: linear-gradient(160deg, #ffffff 0%, #a8c8ff 35%, #38b6ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 16px rgba(56,182,255,0.45));
    animation: iiy-glitch 9s infinite;
  }
  @keyframes iiy-glitch {
    0%, 87%, 100% { transform: none; filter: drop-shadow(0 0 16px rgba(56,182,255,0.45)); }
    88% { transform: translate(-2px,0) skewX(-2deg); filter: drop-shadow(-3px 0 #7b5ea7) drop-shadow(3px 0 #38b6ff); }
    89% { transform: translate(2px,0); filter: drop-shadow(3px 0 #7b5ea7) drop-shadow(-3px 0 #38b6ff); }
    90% { transform: none; filter: drop-shadow(0 0 16px rgba(56,182,255,0.45)); }
  }
  .iiy-logo .iiy-divider { height: 1px; margin: 4px 0 3px; background: linear-gradient(90deg, #38b6ff 0%, #7b5ea7 55%, transparent 100%); opacity: 0.8; }
  .iiy-logo .iiy-sub { font-family: 'Share Tech Mono', monospace; font-size: 7px; letter-spacing: 2.5px; color: rgba(100,160,230,0.5); text-transform: uppercase; }
  .iiy-ring-ticks { animation: iiy-spin 20s linear infinite; transform-origin: 48px 48px; }
  @keyframes iiy-spin { to { transform: rotate(360deg); } }
  .iiy-eye-l { animation: iiy-eye 3.5s ease-in-out infinite; }
  .iiy-eye-r { animation: iiy-eye 3.5s ease-in-out infinite 0.2s; }
  @keyframes iiy-eye { 0%, 70%, 100% { opacity: 1; } 76% { opacity: 0.05; } }
  .iiy-scan { animation: iiy-scan 2.8s ease-in-out infinite; }
  @keyframes iiy-scan { 0% { transform: translateY(-22px); opacity: 0; } 8% { opacity: 0.55; } 92% { opacity: 0.55; } 100% { transform: translateY(22px); opacity: 0; } }
  .iiy-core { animation: iiy-pulse 2.2s ease-in-out infinite; transform-origin: 48px 61px; }
  @keyframes iiy-pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.9); opacity: 1; } }

  .iiy-nav-tabs {
    display: flex;
    align-items: center;
    gap: 2px;
    background: rgba(255,255,255,.04);
    border: 1px solid rgba(255,255,255,.07);
    border-radius: 12px;
    padding: 4px;
  }
  .iiy-tab-btn {
    padding: 8px 20px;
    border-radius: 9px;
    border: none;
    background: transparent;
    color: rgba(255,255,255,.45);
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all .2s;
    letter-spacing: .2px;
    font-family: 'Space Grotesk', -apple-system, sans-serif;
    white-space: nowrap;
  }
  .iiy-tab-btn:hover { color: rgba(255,255,255,.8); background: rgba(255,255,255,.05); }
  .iiy-tab-btn.active {
    background: linear-gradient(135deg, rgba(99,102,241,.3), rgba(56,182,255,.2));
    color: #fff;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.12), 0 0 0 1px rgba(99,102,241,.3);
  }

  .iiy-nav-link {
    position: relative;
    color: rgba(255,255,255,.5);
    font-size: 13.5px;
    font-weight: 600;
    text-decoration: none;
    padding: 4px 0;
    transition: color .2s;
    white-space: nowrap;
    letter-spacing: .2px;
    font-family: 'Space Grotesk', -apple-system, sans-serif;
  }
  .iiy-nav-link::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1.5px;
    border-radius: 2px;
    background: linear-gradient(90deg, #00f0ff, #7000ff);
    box-shadow: 0 0 8px rgba(0,240,255,.55);
    transition: width .25s ease;
  }
  .iiy-nav-link:hover { color: rgba(255,255,255,.9); }
  .iiy-nav-link:hover::after { width: 100%; }
  .iiy-nav-link.active { color: #fff; }
  .iiy-nav-link.active::after { width: 100%; }

  .theme-toggle {
    position: relative;
    width: 60px;
    height: 32px;
    background: rgba(30, 41, 59, 0.6);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    transition: all 0.3s ease;
  }
  .theme-toggle:hover {
    background: rgba(15, 7, 40, 0.9);
    border-color: rgba(112, 0, 255, 0.5);
  }
  .theme-toggle-slider {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 24px;
    height: 24px;
    background: linear-gradient(135deg, #7000ff, #00f0ff);
    border-radius: 50%;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(112, 0, 255, 0.5);
  }
  .theme-toggle.light .theme-toggle-slider {
    transform: translateX(28px);
    background: linear-gradient(135deg, #F59E0B, #EAB308);
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
  }
  .theme-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 16px;
    height: 16px;
    transition: opacity 0.3s ease;
  }
  .theme-icon-moon { left: 8px; opacity: 1; }
  .theme-icon-sun { right: 8px; opacity: 0.4; }
  .theme-toggle.light .theme-icon-moon { opacity: 0.4; }
  .theme-toggle.light .theme-icon-sun { opacity: 1; }
}

/* ── 10. CHARACTER SHEET HERO (advanced mock) ───────────────── */
@layer components {
  .iiy-cs-hero {
    width: 100%;
    max-width: none;
  }

  .iiy-cs-hero-border {
    padding: 1px;
    border-radius: 26px;
    background: linear-gradient(135deg,
      rgba(112,0,255,0.5) 0%,
      rgba(255,255,255,0.06) 45%,
      rgba(0,240,255,0.25) 100%);
    box-shadow: 0 8px 48px -8px rgba(0,0,0,0.7);
  }

  .iiy-cs-hero-inner {
    background: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border-radius: 1rem;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .iiy-cs-hero-top {
    display: flex;
    align-items: stretch;
    flex-wrap: wrap;
  }

  .iiy-cs-vd {
    width: 1px;
    flex-shrink: 0;
    margin: 16px 0;
    background: linear-gradient(to bottom,
      transparent 0%, rgba(255,255,255,.08) 25%, rgba(255,255,255,.08) 75%, transparent 100%);
  }

  .iiy-cs-s-avatar {
    padding: 26px 18px 26px 26px;
    display: flex;
    align-items: center;
    flex-shrink: 0;
  }

  .iiy-cs-avatar-wrap { position: relative; }
  .iiy-cs-avatar {
    width: 90px;
    height: 90px;
    border-radius: 20px;
    background: linear-gradient(145deg, #160838, #250f52);
    border: 1.5px solid rgba(112,0,255,0.55);
    box-shadow: 0 0 28px -4px rgba(112,0,255,0.5), inset 0 1px 0 rgba(255,255,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .iiy-cs-avatar-ring {
    position: absolute;
    inset: -6px;
    border-radius: 27px;
    border: 1px solid rgba(112,0,255,0.2);
    animation: iiy-cs-rpulse 2.8s ease-in-out infinite;
  }

  .iiy-cs-avatar-ring-2 {
    position: absolute;
    inset: -12px;
    border-radius: 33px;
    border: 1px solid rgba(112,0,255,0.07);
    animation: iiy-cs-rpulse 2.8s ease-in-out infinite 0.5s;
  }

  @keyframes iiy-cs-rpulse {
    0%, 100% { opacity: .35; }
    50% { opacity: 1; }
  }

  .iiy-cs-s-identity {
    padding: 26px 20px 26px 14px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 14px;
    flex-shrink: 0;
    min-width: 160px;
  }

  .iiy-cs-test-progress {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .iiy-cs-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--neon-primary);
    box-shadow: 0 0 7px rgba(112,0,255,0.8);
  }

  .iiy-cs-dot.iiy-cs-cyan {
    background: var(--neon-cyan);
    box-shadow: 0 0 7px rgba(0,240,255,0.7);
  }

  .iiy-cs-dot.iiy-cs-empty {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.2);
    box-shadow: none;
  }

  .iiy-cs-test-count {
    font-size: 10px;
    color: rgba(255,255,255,0.25);
    margin-left: 4px;
    font-weight: 500;
  }

  .iiy-cs-user-name {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 24px;
    font-weight: 800;
    letter-spacing: -0.03em;
    line-height: 1;
  }

  .iiy-cs-account-row { display: flex; align-items: center; gap: 7px; }
  .iiy-cs-badge-premium {
    font-size: 9px;
    font-weight: 800;
    letter-spacing: .1em;
    text-transform: uppercase;
    padding: 3px 9px;
    border-radius: 5px;
    background: linear-gradient(90deg, rgba(112,0,255,.22), rgba(0,240,255,.15));
    color: var(--neon-cyan);
    border: 1px solid rgba(0,240,255,.28);
    box-shadow: 0 0 10px -3px rgba(0,240,255,.2);
  }
  .iiy-cs-account-status { font-size: 10px; color: rgba(255,255,255,.2); }

  .iiy-cs-s-tags {
    padding: 22px 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    flex-shrink: 0;
  }

  .iiy-cs-hero-bottom {
    padding: 14px 20px 20px;
    border-top: 1px solid rgba(255,255,255,.05);
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .iiy-cs-tags-label {
    font-size: 8px;
    font-weight: 700;
    letter-spacing: .16em;
    text-transform: uppercase;
    color: rgba(255,255,255,.16);
    margin-bottom: 1px;
  }

  .iiy-cs-tags-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .iiy-cs-tag {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 6px 13px 6px 10px;
    border-radius: 10px;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 12px;
    font-weight: 600;
    white-space: nowrap;
    cursor: default;
    transition: transform .18s ease, box-shadow .18s ease;
    position: relative;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  /* Inner shimmer line */
  .iiy-cs-tag::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: linear-gradient(180deg, rgba(255,255,255,.055) 0%, transparent 55%);
    pointer-events: none;
  }

  .iiy-cs-tag-icon { flex-shrink: 0; opacity: .8; }

  .iiy-cs-tag:hover { transform: translateY(-2px); }

  .iiy-cs-tag::after {
    content: attr(data-tip);
    position: absolute;
    bottom: calc(100% + 7px);
    left: 50%;
    transform: translateX(-50%);
    background: rgba(6,2,22,.97);
    border: 1px solid rgba(255,255,255,.1);
    color: #94a3b8;
    font-size: 9px;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    letter-spacing: .06em;
    padding: 4px 9px;
    border-radius: 6px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity .15s;
    z-index: 20;
  }
  .iiy-cs-tag:hover::after { opacity: 1; }

  .iiy-cs-t-cyan { background: linear-gradient(135deg, rgba(0,240,255,.12) 0%, rgba(0,160,220,.07) 100%); color: var(--neon-cyan); border: 1px solid rgba(0,240,255,.22); }
  .iiy-cs-t-cyan:hover { box-shadow: 0 4px 20px -4px rgba(0,240,255,.28), inset 0 0 14px -4px rgba(0,240,255,.1); }
  .iiy-cs-t-violet { background: linear-gradient(135deg, rgba(139,92,246,.17) 0%, rgba(112,0,255,.09) 100%); color: #c4b5fd; border: 1px solid rgba(139,92,246,.3); }
  .iiy-cs-t-violet:hover { box-shadow: 0 4px 20px -4px rgba(139,92,246,.32), inset 0 0 14px -4px rgba(112,0,255,.12); }
  .iiy-cs-t-green { background: linear-gradient(135deg, rgba(16,185,129,.13) 0%, rgba(5,150,105,.07) 100%); color: #10b981; border: 1px solid rgba(16,185,129,.24); }
  .iiy-cs-t-green:hover { box-shadow: 0 4px 20px -4px rgba(16,185,129,.28), inset 0 0 14px -4px rgba(16,185,129,.1); }
  .iiy-cs-t-amber { background: linear-gradient(135deg, rgba(251,191,36,.14) 0%, rgba(245,158,11,.07) 100%); color: #fbbf24; border: 1px solid rgba(251,191,36,.26); }
  .iiy-cs-t-amber:hover { box-shadow: 0 4px 20px -4px rgba(251,191,36,.26), inset 0 0 14px -4px rgba(245,158,11,.1); }
  .iiy-cs-t-pink { background: linear-gradient(135deg, rgba(255,0,92,.10) 0%, rgba(220,0,60,.06) 100%); color: rgba(255,130,155,1); border: 1px solid rgba(255,0,92,.2); }
  .iiy-cs-t-pink:hover { box-shadow: 0 4px 20px -4px rgba(255,0,92,.22), inset 0 0 14px -4px rgba(255,0,92,.08); }

  .iiy-cs-s-archetype {
    padding: 20px;
    display: flex;
    flex-direction: row;
    align-items: stretch;
    gap: 12px;
    flex: 1;
    min-width: 0;
  }

  .iiy-cs-archetype-box {
    flex: 0 0 auto;
    min-width: 190px;
    background: rgba(112,0,255,.06);
    border: 1px solid rgba(112,0,255,.22);
    border-radius: 14px;
    padding: 13px 15px;
    position: relative;
    overflow: hidden;
  }
  .iiy-cs-archetype-box::before {
    content: '';
    position: absolute;
    top: -30px;
    right: -30px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(112,0,255,.1), transparent 70%);
    pointer-events: none;
  }

  .iiy-cs-arch-eye {
    font-size: 8px;
    font-weight: 700;
    letter-spacing: .14em;
    text-transform: uppercase;
    color: rgba(112,0,255,.6);
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 8px;
  }
  .iiy-cs-arch-blink {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--neon-primary);
    box-shadow: 0 0 5px rgba(112,0,255,.9);
    animation: iiy-cs-blink 2s ease-in-out infinite;
  }
  @keyframes iiy-cs-blink { 0%,100%{opacity:1} 50%{opacity:.25} }

  .iiy-cs-arch-row { display: flex; align-items: center; gap: 12px; min-width: 0; }
  .iiy-cs-arch-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    flex-shrink: 0;
    background: linear-gradient(135deg, rgba(112,0,255,.25), rgba(0,240,255,.15));
    border: 1px solid rgba(112,0,255,.3);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }
  .iiy-cs-arch-name {
    font-family: 'Space Grotesk', sans-serif;
    font-size: 16px;
    font-weight: 800;
    letter-spacing: -.02em;
    line-height: 1.15;
    color: var(--neon-cyan);
    text-shadow: 0 0 18px rgba(0,240,255,.3);
  }

  .iiy-cs-subtitle-box {
    flex: 1;
    min-width: 0;
    background: rgba(255,255,255,.02);
    border: 1px solid rgba(255,255,255,.06);
    border-radius: 11px;
    padding: 11px 14px;
    display: flex;
    flex-direction: column;
  }
  .iiy-cs-subtitle-box .iiy-cs-sub-text {
    flex: 1;
  }
  .iiy-cs-sub-eye {
    font-size: 8px;
    font-weight: 700;
    letter-spacing: .13em;
    text-transform: uppercase;
    color: rgba(255,255,255,.17);
    margin-bottom: 4px;
  }
  .iiy-cs-sub-text {
    font-size: 11.5px;
    color: #94a3b8;
    font-style: italic;
    line-height: 1.55;
  }
  /* Enneagram type badge */
  .iiy-cs-enn-type-badge {
    width: 48px;
    height: 48px;
    flex-shrink: 0;
    border-radius: 12px;
    background: linear-gradient(135deg, rgba(112,0,255,.2), rgba(0,240,255,.12));
    border: 1px solid rgba(112,0,255,.4);
    box-shadow: 0 0 18px -4px rgba(112,0,255,.4);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 22px;
    font-weight: 900;
    color: var(--neon-cyan);
    letter-spacing: -.03em;
    text-shadow: 0 0 14px rgba(0,240,255,.5);
  }

  .iiy-cs-ai-chip {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    font-size: 8px;
    font-weight: 700;
    font-style: normal;
    letter-spacing: .1em;
    text-transform: uppercase;
    color: rgba(112,0,255,.6);
    background: rgba(112,0,255,.1);
    border: 1px solid rgba(112,0,255,.2);
    padding: 1px 6px;
    border-radius: 4px;
    vertical-align: middle;
    margin-left: 5px;
  }

  .iiy-cs-s-actions {
    padding: 22px 24px 22px 18px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 8px;
    flex-shrink: 0;
    border-left: 1px solid rgba(255,255,255,.05);
    background: transparent;
  }

  .iiy-cs-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 11px 22px;
    border-radius: 11px;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    letter-spacing: .01em;
    white-space: nowrap;
    transition: all .18s cubic-bezier(.16,1,.3,1);
    min-width: 140px;
  }
  .iiy-cs-btn svg { width: 14px; height: 14px; flex-shrink: 0; opacity: .85; }

  .iiy-cs-btn-primary {
    background: linear-gradient(135deg, rgba(112,0,255,.35), rgba(0,240,255,.2));
    color: var(--neon-cyan);
    border: 1px solid rgba(0,240,255,.3);
    box-shadow: 0 0 22px -6px rgba(0,240,255,.3), inset 0 1px 0 rgba(255,255,255,.08);
  }
  .iiy-cs-btn-primary:hover {
    background: linear-gradient(135deg, rgba(112,0,255,.5), rgba(0,240,255,.3));
    box-shadow: 0 0 30px -4px rgba(0,240,255,.45), inset 0 1px 0 rgba(255,255,255,.12);
    transform: translateY(-2px);
  }

  .iiy-cs-btn-ghost {
    background: rgba(255,255,255,.03);
    color: rgba(255,255,255,.4);
    border: 1px solid rgba(255,255,255,.08);
  }
  .iiy-cs-btn-ghost:hover {
    background: rgba(255,255,255,.06);
    color: rgba(255,255,255,.65);
    border-color: rgba(255,255,255,.14);
    transform: translateY(-2px);
  }

  .iiy-cs-btn:disabled,
  .iiy-cs-btn[aria-disabled="true"] {
    opacity: 0.55;
    cursor: not-allowed;
    transform: none;
  }

  .iiy-cs-btn:disabled:hover,
  .iiy-cs-btn[aria-disabled="true"]:hover {
    transform: none;
  }

  .iiy-cs-btn-ghost:hover .iiy-cs-spin { animation: iiy-cs-spin 0.5s linear; }
  @keyframes iiy-cs-spin { to { transform: rotate(360deg); } }

  .iiy-cs-legend {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-top: 14px;
    flex-wrap: wrap;
  }

  .iiy-cs-l-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: rgba(255,255,255,.22);
    font-weight: 500;
    letter-spacing: .05em;
  }
  .iiy-cs-l-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .iiy-cs-l-sep { width: 1px; height: 12px; background: rgba(255,255,255,.1); }

  /* Shared neuroglass hover glow for inner panels */
  .iiy-hover-panel {
    transition: transform 0.22s ease, border-color 0.22s ease, box-shadow 0.22s ease;
    will-change: transform;
  }
  .iiy-hover-panel:hover {
    transform: translateY(-2px);
    border-color: rgba(112, 0, 255, 0.28);
    box-shadow:
      0 0 40px -12px rgba(112, 0, 255, 0.28),
      0 8px 32px -16px rgba(0, 0, 0, 0.55),
      inset 0 1px 0 rgba(255, 255, 255, 0.12);
  }

  .demo-mode .iiy-cs-s-archetype { flex-direction: column; }
  .demo-mode .iiy-cs-archetype-box { min-width: 0; width: 100%; }
  .demo-mode .iiy-cs-subtitle-box { min-width: 0; width: 100%; }

  @media (max-width: 900px) {
    .iiy-cs-hero-top { flex-direction: column; }
    .iiy-cs-s-archetype { flex-direction: column; }
    .iiy-cs-vd { display: none; }
    .iiy-cs-s-actions { border-left: none; border-top: 1px solid rgba(255,255,255,.05); }
    .iiy-cs-btn { width: 100%; }
    .iiy-nav-tabs { display: none; }
  }

  /* ── MOBILE (≤ 640px) ──────────────────────────────────────── */
  @media (max-width: 640px) {
    /* Nav */
    .iiy-nav-tabs { display: none; }

    /* Hero top: avatar + identity side-by-side in row 1,
       archetype + actions each own full-width row below */
    .iiy-cs-hero-top {
      flex-direction: row;
      flex-wrap: wrap;
      align-items: flex-start;
    }
    /* Avatar: compact, auto-width, stays in row 1 */
    .iiy-cs-s-avatar {
      flex: 0 0 auto;
      padding: 14px 8px 14px 14px;
    }
    .iiy-cs-avatar { width: 58px; height: 58px; border-radius: 14px; }
    .iiy-cs-avatar-ring { inset: -4px; border-radius: 18px; }
    .iiy-cs-avatar-ring-2 { inset: -8px; border-radius: 22px; }
    /* Identity: fills remaining space in row 1 */
    .iiy-cs-s-identity {
      flex: 1 1 0;
      min-width: 0;
      padding: 12px 12px 12px 10px;
      gap: 8px;
    }
    .iiy-cs-user-name { font-size: 17px; }
    /* Archetype: new row, full width */
    .iiy-cs-s-archetype {
      flex: 0 0 100%;
      flex-direction: column;
      padding: 10px 14px 12px;
      gap: 8px;
    }
    .iiy-cs-archetype-box { min-width: 0; width: 100%; }
    .iiy-cs-subtitle-box { min-width: 0; width: 100%; }
    /* Actions: new row, full width, side-by-side buttons */
    .iiy-cs-s-actions {
      flex: 0 0 100%;
      border-left: none;
      border-top: 1px solid rgba(255,255,255,.05);
      padding: 10px 14px;
      flex-direction: row;
      flex-wrap: wrap;
      gap: 8px;
    }
    .iiy-cs-btn {
      width: auto;
      flex: 1 1 0;
      min-width: 0;
      padding: 9px 12px;
      font-size: 12px;
    }
    /* Tags */
    .iiy-cs-hero-bottom { padding: 10px 14px 14px; }
    .iiy-cs-tag { font-size: 11px; padding: 5px 10px; }
  }
}

/* ─── ANIMATIONS ──────────────────────────────────────────────── */
@keyframes iiy-auth-glow {
  0%,100% { opacity:.55; transform:translateX(-50%) scale(1); }
  50%      { opacity:1;   transform:translateX(-50%) scale(1.08); }
}

@keyframes spin-slow { to { transform: rotate(360deg); } }
.animate-spin-slow { animation: spin-slow 3s linear infinite; }

@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 15px -3px rgba(112,0,255,0.45); }
  50%       { box-shadow: 0 0 35px -3px rgba(112,0,255,0.75); }
}
.animate-glow-pulse { animation: glow-pulse 2.5s ease-in-out infinite; }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
.animate-fade-up { animation: fadeUp 0.7s ease-out forwards; }

@keyframes neural-scan {
  0%   { transform: translateY(-100%); opacity: 0; }
  20%  { opacity: 1; }
  80%  { opacity: 1; }
  100% { transform: translateY(400%); opacity: 0; }
}
.animate-neural-scan { animation: neural-scan 3s ease-in-out infinite; }

