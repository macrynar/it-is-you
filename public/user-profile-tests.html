<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>It Is You - Testy Psychometryczne</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-deep':         '#030014',
                        'bg-surface':      '#0f0728',
                        'neon-primary':    '#7000ff',
                        'neon-cyan':       '#00f0ff',
                        'neon-pink':       '#ff005c',
                        'brand-primary':   '#7000ff',
                        'brand-secondary': '#00f0ff',
                        'brand-accent':    '#ff005c',
                        'bg-main':         '#030014',
                        'status-success':  '#10b981',
                        'status-danger':   '#ff005c',
                        'text-main':       '#f8fafc',
                        'text-muted':      '#94a3b8',
                    },
                    boxShadow: {
                        'glow-primary':    '0 0 20px -5px rgba(112,0,255,0.5)',
                        'glow-primary-lg': '0 0 40px -5px rgba(112,0,255,0.6)',
                        'glow-cyan':       '0 0 20px -5px rgba(0,240,255,0.5)',
                        'glow-pink':       '0 0 20px -5px rgba(255,0,92,0.5)',
                        'glow-danger':     '0 0 20px -5px rgba(255,0,92,0.5)',
                    },
                    backgroundImage: {
                        'neural-gradient': 'radial-gradient(circle at 50% 0%, #2a1b5e 0%, transparent 60%), radial-gradient(circle at 100% 0%, #1a0b38 0%, transparent 40%)',
                    },
                }
            }
        }
    </script>
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes blink {
            0%, 90%, 100% { opacity: 1; transform: scale(1); }
            95% { opacity: 0.3; transform: scale(0.5); }
        }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.3), 0 0 40px rgba(139, 92, 246, 0.1); }
            50% { box-shadow: 0 0 30px rgba(139, 92, 246, 0.5), 0 0 60px rgba(139, 92, 246, 0.2); }
        }
        
        :root {
            --bg-deep:      #030014;
            --bg-surface:   #0f0728;
            --neon-primary: #7000ff;
            --neon-cyan:    #00f0ff;
            --neon-pink:    #ff005c;
            --glass-border: rgba(255,255,255,0.08);
            --glass-shine:  rgba(255,255,255,0.10);
        }

        body {
            background-color: var(--bg-deep);
            background-image:
                radial-gradient(circle at 50% 0%, #2a1b5e 0%, transparent 60%),
                radial-gradient(circle at 100% 0%, #1a0b38 0%, transparent 40%),
                radial-gradient(circle at 0% 80%, #0d0626 0%, transparent 50%);
            background-attachment: fixed;
        }
        
        .grid-bg {
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        /* Neural Glass 2.0 ‚Äî card-neural & glass-card alias */
        .card-neural, .glass-card {
            position: relative;
            overflow: hidden;
            background: linear-gradient(180deg, rgba(20,10,40,0.75) 0%, rgba(10,5,20,0.45) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 4px 24px -1px rgba(0,0,0,0.35), inset 0 1px 0 0 var(--glass-shine);
            transition: border-color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
        }

        .card-neural::before, .glass-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(112,0,255,0.04) 0%, transparent 60%);
            pointer-events: none;
            z-index: 0;
        }

        .card-neural:hover, .glass-card:hover {
            border-color: rgba(112, 0, 255, 0.35);
            box-shadow:
                0 0 40px -8px rgba(112,0,255,0.22),
                0 8px 32px -8px rgba(0,0,0,0.4),
                inset 0 1px 0 0 rgba(255,255,255,0.18);
            transform: translateY(-3px);
        }

        /* Test-specific hover accents */
        .glass-card.test-hexaco:hover,
        .glass-card.test-strengths:hover,
        .glass-card.test-career:hover,
        .glass-card.test-values:hover {
            border-color: rgba(112, 0, 255, 0.4);
            box-shadow: 0 0 40px -8px rgba(112,0,255,0.3), inset 0 1px 0 0 rgba(255,255,255,0.18);
        }

        .glass-card.test-enneagram:hover {
            border-color: rgba(0, 240, 255, 0.35);
            box-shadow: 0 0 40px -8px rgba(0,240,255,0.25), inset 0 1px 0 0 rgba(255,255,255,0.18);
        }

        .glass-card.test-dark-triad:hover {
            border-color: rgba(255, 0, 92, 0.35);
            box-shadow: 0 0 40px -8px rgba(255,0,92,0.25), inset 0 1px 0 0 rgba(255,255,255,0.18);
        }

        .glass-card-active { /* default state is clean */ }

        .glass-card-locked {
            opacity: 0.55;
            position: relative;
        }

        .glass-card-locked::after {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.45);
            backdrop-filter: blur(4px);
            border-radius: 1rem;
            pointer-events: none;
        }

        .glass-card-locked:hover {
            transform: none;
            border-color: var(--glass-border);
            box-shadow: none;
        }
        
        .neon-badge {
            background: rgba(100,116,139,0.12);
            border: 1px solid rgba(100,116,139,0.2);
            color: #94a3b8;
            font-size: 0.6rem;
            padding: 0.2rem 0.65rem;
            border-radius: 0.35rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.07em;
        }

        .neon-badge-success {
            background: rgba(16,185,129,0.12);
            border: 1px solid rgba(16,185,129,0.25);
            color: #6ee7b7;
        }
        
        .brand-font {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            letter-spacing: -0.02em;
        }
        
        .card-icon-wrapper {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.07);
            transition: all 0.3s ease;
        }

        .glass-card:hover .card-icon-wrapper,
        .card-neural:hover .card-icon-wrapper {
            background: rgba(112,0,255,0.12);
            border-color: rgba(112,0,255,0.3);
        }
        
        /* Theme Toggle Animation */
        .theme-toggle {
            position: relative;
            width: 60px;
            height: 32px;
            background: rgba(30, 41, 59, 0.6);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            background: rgba(15, 7, 40, 0.9);
            border-color: rgba(112, 0, 255, 0.5);
        }

        .theme-toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #7000ff, #00f0ff);
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(112, 0, 255, 0.5);
        }
        
        .theme-toggle.light .theme-toggle-slider {
            transform: translateX(28px);
            background: linear-gradient(135deg, #F59E0B, #EAB308);
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
        }
        
        .theme-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            transition: opacity 0.3s ease;
        }
        
        .theme-icon-moon {
            left: 8px;
            opacity: 1;
        }
        
        .theme-icon-sun {
            right: 8px;
            opacity: 0.4;
        }
        
        .theme-toggle.light .theme-icon-moon {
            opacity: 0.4;
        }
        
        .theme-toggle.light .theme-icon-sun {
            opacity: 1;
        }
        
        /* Light Mode Styles */
        body.light-mode {
            background: #F8FAFC;
            background-image: 
                radial-gradient(at 50% 0%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                radial-gradient(at 0% 50%, rgba(59, 130, 246, 0.05) 0%, transparent 50%);
            color: #0F172A;
        }
        
        body.light-mode .grid-bg {
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.02) 1px, transparent 1px);
        }
        
        body.light-mode nav {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 0, 0, 0.1);
        }
        
        body.light-mode .glass-card {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 0, 0, 0.1);
            color: #0F172A;
        }
        
        body.light-mode .glass-card:hover {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(139, 92, 246, 0.3);
        }
        
        body.light-mode .text-white {
            color: #0F172A !important;
        }
        
        body.light-mode .text-slate-300,
        body.light-mode .text-slate-400 {
            color: #475569 !important;
        }
        
        body.light-mode .text-slate-500 {
            color: #64748B !important;
        }
        
        body.light-mode .text-slate-600 {
            color: #475569 !important;
        }
        
        body.light-mode .bg-slate-800\/50,
        body.light-mode .bg-slate-900\/40 {
            background: rgba(241, 245, 249, 0.8) !important;
        }
        
        body.light-mode .border-white\/10,
        body.light-mode .border-slate-700 {
            border-color: rgba(0, 0, 0, 0.1) !important;
        }
        
        body.light-mode .bg-black\/30 {
            background: rgba(255, 255, 255, 0.8) !important;
        }

        /* Neural Glass 2.0 ‚Äî btn-neural (CDN Tailwind doesn't know this class) */
        .btn-neural {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.875rem;
            color: #fff;
            background: linear-gradient(90deg, #5b21b6 0%, #7c3aed 100%);
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 0 20px -5px rgba(124,58,237,0.55), inset 0 1px 0 0 rgba(255,255,255,0.2);
            cursor: pointer;
            transition: all 0.25s ease;
            white-space: nowrap;
            text-decoration: none;
        }
        .btn-neural:hover {
            background: linear-gradient(90deg, #6d28d9 0%, #8b5cf6 100%);
            box-shadow: 0 0 35px -5px rgba(124,58,237,0.75), inset 0 1px 0 0 rgba(255,255,255,0.25);
            transform: translateY(-1px);
        }
        .btn-neural:active { transform: translateY(0); }

        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           IIY MODULE CARDS
        ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        .iiy-modules {
          padding: 0 0 60px;
          font-family: 'Space Grotesk', sans-serif;
        }
        .iiy-modules-header {
          display: flex;
          align-items: center;
          gap: 14px;
          margin-bottom: 28px;
        }
        .iiy-modules-title {
          font-size: 11px;
          font-weight: 600;
          letter-spacing: 3px;
          text-transform: uppercase;
          color: rgba(255,255,255,0.4);
          white-space: nowrap;
        }
        .iiy-modules-header::after {
          content: '';
          flex: 1;
          height: 1px;
          background: linear-gradient(90deg, rgba(56,182,255,0.25), transparent);
        }
        .iiy-modules-count {
          font-size: 11px;
          letter-spacing: 2px;
          color: rgba(56,182,255,0.5);
          white-space: nowrap;
        }
        .iiy-cards-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
        }
        @media (max-width: 1024px) { .iiy-cards-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 640px)  { .iiy-cards-grid { grid-template-columns: 1fr; } }

        /* CARD BASE */
        .iiy-card {
          position: relative;
          border-radius: 16px;
          padding: 24px;
          display: flex;
          flex-direction: column;
          overflow: hidden;
          isolation: isolate;
          cursor: pointer;
          transition: transform 0.3s cubic-bezier(.22,.68,0,1.15), box-shadow 0.3s ease;
          background: rgba(16, 20, 56, 0.6);
          backdrop-filter: blur(24px) saturate(180%);
          -webkit-backdrop-filter: blur(24px) saturate(180%);
          box-shadow:
            inset 0 1px 0 rgba(255,255,255,0.1),
            inset 0 -1px 0 rgba(255,255,255,0.04),
            0 0 0 1px rgba(255,255,255,0.07),
            0 8px 32px -4px rgba(0,0,0,0.6),
            0 2px 8px -2px rgba(0,0,0,0.4);
        }
        .iiy-card::before {
          content: '';
          position: absolute;
          inset: 0;
          border-radius: 16px;
          padding: 1px;
          background: linear-gradient(145deg, rgba(255,255,255,0.18) 0%, rgba(56,182,255,0.2) 30%, rgba(123,94,167,0.15) 65%, rgba(255,255,255,0.04) 100%);
          -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
          -webkit-mask-composite: xor;
          mask-composite: exclude;
          pointer-events: none;
          transition: opacity 0.3s ease;
        }
        .iiy-card::after {
          content: '';
          position: absolute;
          width: 200px; height: 200px;
          border-radius: 50%;
          filter: blur(60px);
          pointer-events: none;
          z-index: -1;
          transition: opacity 0.4s ease, transform 0.4s ease;
          opacity: 0.18;
          bottom: -60px; right: -40px;
        }
        .iiy-card:hover { transform: translateY(-6px) scale(1.01); }
        .iiy-card:hover::after { opacity: 0.35; transform: scale(1.15); }
        .iiy-card:hover .iiy-card-glow { opacity: 1; }

        /* ACCENT COLORS */
        .iiy-card.cyan::after { background: #38b6ff; }
        .iiy-card.cyan:hover { box-shadow: inset 0 1px 0 rgba(255,255,255,0.15), 0 0 0 1px rgba(56,182,255,0.35), 0 0 30px -4px rgba(56,182,255,0.3), 0 0 60px -8px rgba(56,182,255,0.15), 0 16px 48px -6px rgba(0,0,0,0.7); }
        .iiy-card.cyan .iiy-card-icon-wrap  { background: rgba(56,182,255,0.15); border-color: rgba(56,182,255,0.3); }
        .iiy-card.cyan .iiy-card-icon       { color: #38b6ff; }
        .iiy-card.cyan .iiy-card-tag        { color: #38b6ff; border-color: rgba(56,182,255,0.35); background: rgba(56,182,255,0.1); }
        .iiy-card.cyan .iiy-card-meta       { color: rgba(56,182,255,0.6); }

        .iiy-card.violet::after { background: #7b5ea7; }
        .iiy-card.violet:hover { box-shadow: inset 0 1px 0 rgba(255,255,255,0.15), 0 0 0 1px rgba(123,94,167,0.4), 0 0 30px -4px rgba(123,94,167,0.3), 0 0 60px -8px rgba(123,94,167,0.18), 0 16px 48px -6px rgba(0,0,0,0.7); }
        .iiy-card.violet .iiy-card-icon-wrap { background: rgba(123,94,167,0.18); border-color: rgba(123,94,167,0.35); }
        .iiy-card.violet .iiy-card-icon      { color: #b08fff; }
        .iiy-card.violet .iiy-card-tag       { color: #b08fff; border-color: rgba(123,94,167,0.4); background: rgba(123,94,167,0.12); }
        .iiy-card.violet .iiy-card-meta      { color: rgba(160,120,255,0.6); }

        .iiy-card.pink::after { background: #c850c0; }
        .iiy-card.pink:hover { box-shadow: inset 0 1px 0 rgba(255,255,255,0.15), 0 0 0 1px rgba(200,80,192,0.4), 0 0 30px -4px rgba(200,80,192,0.3), 0 0 60px -8px rgba(200,80,192,0.18), 0 16px 48px -6px rgba(0,0,0,0.7); }
        .iiy-card.pink .iiy-card-icon-wrap { background: rgba(200,80,192,0.15); border-color: rgba(200,80,192,0.3); }
        .iiy-card.pink .iiy-card-icon      { color: #e878e0; }
        .iiy-card.pink .iiy-card-tag       { color: #e878e0; border-color: rgba(200,80,192,0.35); background: rgba(200,80,192,0.1); }
        .iiy-card.pink .iiy-card-meta      { color: rgba(220,100,210,0.6); }

        /* GLOW LINE */
        .iiy-card-glow {
          position: absolute; bottom: 0; left: 20%; right: 20%; height: 1px;
          border-radius: 100px; pointer-events: none; opacity: 0; transition: opacity 0.3s ease;
        }
        .cyan  .iiy-card-glow { background: #38b6ff; box-shadow: 0 0 12px 3px rgba(56,182,255,0.6); }
        .violet .iiy-card-glow { background: #b08fff; box-shadow: 0 0 12px 3px rgba(123,94,167,0.7); }
        .pink  .iiy-card-glow { background: #e878e0; box-shadow: 0 0 12px 3px rgba(200,80,192,0.7); }

        /* TOP ROW */
        .iiy-card-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px; }
        .iiy-card-icon-wrap {
          width: 44px; height: 44px; border-radius: 12px; border: 1px solid;
          display: flex; align-items: center; justify-content: center;
          transition: transform 0.3s ease; flex-shrink: 0;
        }
        .iiy-card:hover .iiy-card-icon-wrap { transform: scale(1.08) rotate(-3deg); }
        .iiy-card-icon { font-size: 18px; line-height: 1; display: flex; }
        .iiy-card-tag {
          font-size: 10px; font-weight: 600; letter-spacing: 1.5px;
          text-transform: uppercase; padding: 5px 11px; border-radius: 100px; border: 1px solid;
        }

        /* BODY */
        .iiy-card-title { font-size: 20px; font-weight: 700; color: #fff; letter-spacing: -0.3px; margin-bottom: 6px; transition: text-shadow 0.3s ease; }
        .iiy-card:hover .iiy-card-title { text-shadow: 0 0 20px rgba(255,255,255,0.3); }
        .iiy-card-desc { font-size: 13px; color: rgba(255,255,255,0.45); margin-bottom: 20px; line-height: 1.5; }

        /* META */
        .iiy-card-meta { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 500; margin-bottom: 20px; }
        .iiy-card-meta-dot { width: 3px; height: 3px; border-radius: 50%; background: currentColor; opacity: 0.5; }

        /* PROGRESS */
        .iiy-card-progress { margin-bottom: 20px; }
        .iiy-card-progress-track { height: 3px; border-radius: 100px; background: rgba(255,255,255,0.08); overflow: hidden; margin-bottom: 6px; }
        .iiy-card-progress-fill { height: 100%; border-radius: 100px; background: linear-gradient(90deg, #38b6ff, #7b5ea7); box-shadow: 0 0 8px rgba(56,182,255,0.5); position: relative; transition: width 0.8s ease; }
        .iiy-card-progress-fill::after { content: ''; position: absolute; right: 0; top: 50%; transform: translateY(-50%); width: 6px; height: 6px; border-radius: 50%; background: #fff; box-shadow: 0 0 6px rgba(56,182,255,0.8); }
        .iiy-card-progress-fill.zero::after { display: none; }
        .iiy-card-progress-label { font-size: 10px; color: rgba(255,255,255,0.3); text-align: right; }

        /* DIVIDER */
        .iiy-card-divider { height: 1px; background: rgba(255,255,255,0.07); margin: 0 -24px 20px; }

        /* CTA BUTTON */
        .iiy-card-btn {
          margin-top: auto; width: 100%; padding: 13px 24px; border-radius: 10px; border: none;
          cursor: pointer; font-family: 'Space Grotesk', sans-serif; font-size: 13px; font-weight: 600;
          letter-spacing: 0.5px; text-transform: uppercase;
          display: flex; align-items: center; justify-content: center; gap: 8px;
          transition: transform 0.2s cubic-bezier(.22,.68,0,1.2), box-shadow 0.25s ease, background 0.25s ease;
          position: relative; overflow: hidden;
        }
        .iiy-card-btn::after { content: ''; position: absolute; top: 0; left: -80%; width: 45%; height: 100%; background: linear-gradient(115deg, transparent, rgba(255,255,255,0.12), transparent); transition: left 0.5s ease; }
        .iiy-card-btn:hover::after { left: 140%; }
        .iiy-card-btn.ghost { background: rgba(255,255,255,0.05); color: rgba(255,255,255,0.55); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.1); }
        .iiy-card-btn.ghost:hover { background: rgba(255,255,255,0.09); color: rgba(255,255,255,0.8); transform: translateY(-1px); }
        .iiy-card-btn.primary { background: linear-gradient(110deg, #3d2a9e 0%, #6a3fd4 50%, #38b6ff 100%); color: #fff; box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 0 0 1px rgba(56,182,255,0.2), 0 0 20px -2px rgba(56,182,255,0.25), 0 4px 16px -2px rgba(0,0,0,0.5); }
        .iiy-card-btn.primary:hover { transform: translateY(-2px); box-shadow: inset 0 1px 0 rgba(255,255,255,0.25), 0 0 0 1px rgba(56,182,255,0.5), 0 0 24px -2px rgba(56,182,255,0.4), 0 8px 24px -4px rgba(0,0,0,0.6); }
        .iiy-card-btn.primary-pink { background: linear-gradient(110deg, #7b1fa2 0%, #c850c0 50%, #ff6b9d 100%); color: #fff; box-shadow: inset 0 1px 0 rgba(255,255,255,0.2), 0 0 0 1px rgba(200,80,192,0.25), 0 0 20px -2px rgba(200,80,192,0.3), 0 4px 16px -2px rgba(0,0,0,0.5); }
        .iiy-card-btn.primary-pink:hover { transform: translateY(-2px); box-shadow: inset 0 1px 0 rgba(255,255,255,0.25), 0 0 0 1px rgba(200,80,192,0.6), 0 0 28px -2px rgba(200,80,192,0.5), 0 8px 24px -4px rgba(0,0,0,0.6); }
        .iiy-card-btn-arrow { font-size: 16px; transition: transform 0.2s ease; }
        .iiy-card-btn:hover .iiy-card-btn-arrow { transform: translateX(4px); }

        /* ‚îÄ‚îÄ iiy-logo ‚îÄ‚îÄ */
        .iiy-logo, .iiy-logo * { box-sizing: border-box; margin: 0; padding: 0; }
        .iiy-logo { display: inline-flex; align-items: center; gap: 20px; text-decoration: none; user-select: none; }
        .iiy-logo .iiy-signet svg { display: block; width: 80px; height: 80px; }
        .iiy-logo .iiy-wordmark { display: flex; flex-direction: column; }
        .iiy-logo .iiy-title { font-family: 'Orbitron', monospace; font-weight: 900; font-size: 38px; letter-spacing: 8px; line-height: 1; text-transform: uppercase; background: linear-gradient(160deg, #ffffff 0%, #a8c8ff 35%, #38b6ff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; filter: drop-shadow(0 0 16px rgba(56,182,255,0.45)); animation: iiy-glitch 9s infinite; }
        @keyframes iiy-glitch { 0%, 87%, 100% { transform: none; filter: drop-shadow(0 0 16px rgba(56,182,255,0.45)); } 88% { transform: translate(-2px,0) skewX(-2deg); filter: drop-shadow(-3px 0 #7b5ea7) drop-shadow(3px 0 #38b6ff); } 89% { transform: translate(2px,0); filter: drop-shadow(3px 0 #7b5ea7) drop-shadow(-3px 0 #38b6ff); } 90% { transform: none; filter: drop-shadow(0 0 16px rgba(56,182,255,0.45)); } }
        .iiy-logo .iiy-divider { height: 1px; margin: 6px 0 5px; background: linear-gradient(90deg, #38b6ff 0%, #7b5ea7 55%, transparent 100%); opacity: 0.8; }
        .iiy-logo .iiy-sub { font-family: 'Share Tech Mono', monospace; font-size: 8.5px; letter-spacing: 3.5px; color: rgba(100,160,230,0.5); text-transform: uppercase; }
        .iiy-ring-ticks { animation: iiy-spin 20s linear infinite; transform-origin: 48px 48px; }
        @keyframes iiy-spin { to { transform: rotate(360deg); } }
        .iiy-eye-l { animation: iiy-eye 3.5s ease-in-out infinite; }
        .iiy-eye-r { animation: iiy-eye 3.5s ease-in-out infinite 0.2s; }
        @keyframes iiy-eye { 0%, 70%, 100% { opacity: 1; } 76% { opacity: 0.05; } }
        .iiy-scan { animation: iiy-scan 2.8s ease-in-out infinite; }
        @keyframes iiy-scan { 0% { transform: translateY(-22px); opacity: 0; } 8% { opacity: 0.55; } 92% { opacity: 0.55; } 100% { transform: translateY(22px); opacity: 0; } }
        .iiy-core { animation: iiy-pulse 2.2s ease-in-out infinite; transform-origin: 48px 61px; }
        @keyframes iiy-pulse { 0%, 100% { transform: scale(1); opacity: 0.6; } 50% { transform: scale(1.9); opacity: 1; } }
        .iiy-logo.iiy-sm { gap: 14px; }
        .iiy-logo.iiy-sm .iiy-signet svg { width: 44px; height: 44px; }
        .iiy-logo.iiy-sm .iiy-title { font-size: 22px; letter-spacing: 5px; }
        .iiy-logo.iiy-sm .iiy-sub { font-size: 7px; letter-spacing: 2.5px; }
        .iiy-logo.iiy-sm .iiy-divider { margin: 4px 0 3px; }
    </style>
</head>
<body class="min-h-screen text-white grid-bg">

    <!-- NAVIGATION -->
    <nav class="border-b border-white/5 bg-bg-surface/80 backdrop-blur-xl sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <!-- Logo -->
                <a href="https://it-is-you1.vercel.app/" class="iiy-logo iiy-sm">
                  <div class="iiy-signet">
                    <svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg">
                      <defs>
                        <linearGradient id="iiy-hg2" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#38b6ff"/><stop offset="50%" stop-color="#7b5ea7"/><stop offset="100%" stop-color="#38b6ff"/></linearGradient>
                        <linearGradient id="iiy-bg2" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#38b6ff" stop-opacity="0.45"/><stop offset="100%" stop-color="#1a1d4a" stop-opacity="0.08"/></linearGradient>
                        <filter id="iiy-glow2" x="-30%" y="-30%" width="160%" height="160%"><feGaussianBlur stdDeviation="2" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                        <clipPath id="iiy-clip2"><polygon points="48,5 87,27 87,69 48,91 9,69 9,27"/></clipPath>
                      </defs>
                      <polygon points="48,5 87,27 87,69 48,91 9,69 9,27" fill="#11143a"/>
                      <g class="iiy-ring-ticks" filter="url(#iiy-glow2)">
                        <line x1="48" y1="5" x2="48" y2="12" stroke="#38b6ff" stroke-width="1.8"/><line x1="87" y1="27" x2="81" y2="30" stroke="#38b6ff" stroke-width="1.8"/><line x1="87" y1="69" x2="81" y2="66" stroke="#38b6ff" stroke-width="1.8"/><line x1="48" y1="91" x2="48" y2="84" stroke="#38b6ff" stroke-width="1.8"/><line x1="9" y1="69" x2="15" y2="66" stroke="#38b6ff" stroke-width="1.8"/><line x1="9" y1="27" x2="15" y2="30" stroke="#38b6ff" stroke-width="1.8"/>
                        <line x1="68" y1="8" x2="66" y2="12" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/><line x1="28" y1="8" x2="30" y2="12" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/><line x1="90" y1="48" x2="84" y2="48" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/><line x1="6" y1="48" x2="12" y2="48" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/><line x1="68" y1="88" x2="66" y2="84" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/><line x1="28" y1="88" x2="30" y2="84" stroke="#7b5ea7" stroke-width="1" opacity="0.6"/>
                      </g>
                      <polygon points="48,5 87,27 87,69 48,91 9,69 9,27" fill="none" stroke="url(#iiy-hg2)" stroke-width="1.8"/>
                      <g clip-path="url(#iiy-clip2)">
                        <line class="iiy-scan" x1="12" y1="48" x2="84" y2="48" stroke="#38b6ff" stroke-width="1.2" opacity="0.5"/>
                        <circle cx="48" cy="30" r="12" fill="#11143a" stroke="#38b6ff" stroke-width="1.2"/>
                        <rect x="37" y="26.5" width="22" height="6" rx="3" fill="#0d0f2b" stroke="#38b6ff" stroke-width="0.7"/>
                        <ellipse class="iiy-eye-l" cx="43" cy="29.5" rx="3.5" ry="1.8" fill="#7b5ea7" filter="url(#iiy-glow2)"/>
                        <ellipse class="iiy-eye-r" cx="53" cy="29.5" rx="3.5" ry="1.8" fill="#7b5ea7" filter="url(#iiy-glow2)"/>
                        <rect x="44.5" y="42" width="7" height="6" rx="1" fill="#11143a" stroke="#38b6ff" stroke-width="0.8"/>
                        <path d="M28 90 L31 50 Q48 44 65 50 L68 90 Z" fill="url(#iiy-bg2)" stroke="#38b6ff" stroke-width="0.9"/>
                        <line x1="48" y1="50" x2="48" y2="74" stroke="#38b6ff" stroke-width="0.5" opacity="0.35"/>
                        <rect x="39" y="55" width="18" height="12" rx="1.5" fill="none" stroke="#38b6ff" stroke-width="0.6" opacity="0.5"/>
                        <line x1="31" y1="52" x2="31" y2="65" stroke="#7b5ea7" stroke-width="1.4" opacity="0.9"/>
                        <line x1="65" y1="52" x2="65" y2="65" stroke="#7b5ea7" stroke-width="1.4" opacity="0.9"/>
                        <circle class="iiy-core" cx="48" cy="61" r="2.8" fill="#38b6ff" filter="url(#iiy-glow2)"/>
                      </g>
                    </svg>
                  </div>
                  <div class="iiy-wordmark">
                    <div class="iiy-title">IT IS YOU</div>
                    <div class="iiy-divider"></div>
                    <div class="iiy-sub">Psychological Character System</div>
                  </div>
                </a>

                <!-- User Actions -->
                <div class="flex items-center gap-4">
                    <button onclick="window.location.href='/user-profile-tests.html'" class="px-4 py-2 text-sm text-slate-300 hover:text-white transition-colors">
                        Dashboard
                    </button>
                    
                    <!-- Theme Toggle -->
                    <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="Prze≈ÇƒÖcz motyw">
                        <div class="theme-toggle-slider"></div>
                        <!-- Moon Icon (Dark Mode) -->
                        <svg class="theme-icon theme-icon-moon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                        <!-- Sun Icon (Light Mode) -->
                        <svg class="theme-icon theme-icon-sun" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                    </button>
                    
                    <button onclick="logout()" class="px-4 py-2 bg-bg-surface/50 hover:bg-bg-surface text-white rounded-lg text-sm border border-white/10 hover:border-brand-primary/50 transition-all backdrop-blur-sm">
                        Wyloguj
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="max-w-7xl mx-auto px-6 py-16">
        
        <!-- PROFILE HERO -->
        <div id="profile-hero" style="animation: fadeUp 0.8s ease-out; background: rgba(15,23,42,0.7); backdrop-filter: blur(16px); border: 1px solid rgba(255,255,255,0.07); border-radius: 20px; padding: 28px 32px; margin-bottom: 48px; position: relative; overflow: hidden;">
            <!-- Background glow blobs -->
            <div style="position:absolute;top:-60px;right:-60px;width:280px;height:280px;background:radial-gradient(circle,rgba(99,102,241,0.12) 0%,transparent 70%);pointer-events:none;"></div>
            <div style="position:absolute;bottom:-80px;left:-40px;width:240px;height:240px;background:radial-gradient(circle,rgba(56,182,255,0.08) 0%,transparent 70%);pointer-events:none;"></div>

            <div style="position:relative;z-index:1;display:flex;flex-wrap:wrap;align-items:center;gap:24px;">

                <!-- Avatar -->
                <div style="position:relative;flex-shrink:0;">
                    <div id="user-avatar" style="width:80px;height:80px;border-radius:50%;overflow:hidden;border:3px solid rgba(99,102,241,0.4);box-shadow:0 0 24px rgba(99,102,241,0.25);background:linear-gradient(135deg,#6366f1,#0ea5e9);display:flex;align-items:center;justify-content:center;">
                        <span id="user-initials" style="font-size:28px;font-weight:700;color:#fff;font-family:'Space Grotesk',sans-serif;">?</span>
                    </div>
                    <div id="profile-level" style="position:absolute;bottom:-10px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;font-size:11px;font-weight:700;padding:2px 10px;border-radius:999px;white-space:nowrap;border:2px solid #0a0f1e;">Lvl 0</div>
                </div>

                <!-- Name / email / badge -->
                <div style="flex-shrink:0;">
                    <h2 id="user-name" style="font-size:26px;font-weight:700;color:#fff;font-family:'Space Grotesk',sans-serif;margin:0 0 4px;">≈Åadowanie...</h2>
                    <p id="user-email" style="color:#94a3b8;font-size:13px;margin:0 0 12px;">---</p>
                    <div id="premium-badge" style="display:inline-flex;align-items:center;gap:6px;padding:5px 14px;border-radius:999px;border:1px solid rgba(148,163,184,0.3);background:rgba(30,41,59,0.5);color:#94a3b8;font-size:11px;font-weight:700;letter-spacing:0.05em;text-transform:uppercase;">
                        <svg width="14" height="14" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                        <span id="badge-text">Free Account</span>
                    </div>
                </div>

                <!-- Progress block -->
                <div style="flex:1;min-width:260px;">
                    <div style="display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:14px;">
                        <div>
                            <h3 style="font-size:18px;font-weight:700;color:#fff;font-family:'Space Grotesk',sans-serif;margin:0 0 3px;">Postƒôp Profilu</h3>
                            <p style="color:#94a3b8;font-size:13px;margin:0;">Uko≈Ñcz wszystkie modu≈Çy aby odblokowaƒá pe≈ÇnƒÖ analizƒô</p>
                        </div>
                        <div style="text-align:right;flex-shrink:0;margin-left:16px;">
                            <div id="completion-count" style="font-size:32px;font-weight:800;font-family:'Space Grotesk',sans-serif;background:linear-gradient(90deg,#38b6ff,#6366f1);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">0/6</div>
                            <p style="font-size:10px;color:#64748b;text-transform:uppercase;letter-spacing:0.1em;margin:0;">Modu≈Ç√≥w</p>
                        </div>
                    </div>

                    <!-- Progress bar -->
                    <div style="position:relative;height:10px;background:rgba(30,41,59,0.8);border-radius:999px;overflow:hidden;margin-bottom:16px;border:1px solid rgba(255,255,255,0.05);">
                        <div id="progress-bar" style="height:100%;width:0%;border-radius:999px;background:linear-gradient(90deg,#4f46e5,#38b6ff);transition:width 1s ease-out;box-shadow:0 0 16px rgba(99,102,241,0.5);"></div>
                        <div id="progress-percentage" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#fff;">0%</div>
                    </div>

                    <!-- Next Step card -->
                    <div id="next-step-card" style="display:flex;align-items:center;gap:14px;background:rgba(15,23,42,0.9);border:1px solid rgba(99,102,241,0.25);border-radius:12px;padding:12px 16px;">
                        <div style="flex-shrink:0;width:36px;height:36px;background:linear-gradient(135deg,#7c3aed,#6366f1);border-radius:10px;display:flex;align-items:center;justify-content:center;">
                            <svg width="18" height="18" fill="none" stroke="#fff" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                        </div>
                        <div style="flex:1;">
                            <p style="font-size:11px;font-weight:700;color:#38b6ff;text-transform:uppercase;letter-spacing:0.08em;margin:0 0 2px;">Nastƒôpny Krok</p>
                            <p id="next-step-text" style="font-size:13px;color:#cbd5e1;margin:0;">Rozpocznij pierwszy test aby zbudowaƒá sw√≥j profil psychometryczny</p>
                        </div>
                        <button id="next-step-button" onclick="startNextTest()" style="flex-shrink:0;background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;font-size:13px;font-weight:700;padding:8px 18px;border-radius:8px;border:none;cursor:pointer;white-space:nowrap;box-shadow:0 0 16px rgba(99,102,241,0.4);transition:opacity 0.2s;" onmouseover="this.style.opacity='.85'" onmouseout="this.style.opacity='1'">
                            Start &rsaquo;
                        </button>
                    </div>

                    <!-- Completion Message (hidden by default) -->
                    <div id="completion-message" style="display:none;align-items:center;gap:14px;background:rgba(6,78,59,0.2);border:1px solid rgba(52,211,153,0.3);border-radius:12px;padding:12px 16px;margin-top:10px;">
                        <div style="flex-shrink:0;width:36px;height:36px;background:linear-gradient(135deg,#059669,#10b981);border-radius:10px;display:flex;align-items:center;justify-content:center;">
                            <svg width="18" height="18" fill="none" stroke="#fff" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                        </div>
                        <div>
                            <p style="font-size:12px;font-weight:700;color:#34d399;margin:0 0 2px;">üéâ Profil Uko≈Ñczony!</p>
                            <p style="font-size:13px;color:#cbd5e1;margin:0;">Gratulacje! Uko≈Ñczy≈Çe≈õ wszystkie 6 modu≈Ç√≥w psychometrycznych.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Module Cards -->
        <section class="iiy-modules" style="position:relative;">
          <!-- ambient background blobs -->
          <div style="position:absolute;inset:0;pointer-events:none;z-index:-1;overflow:hidden;border-radius:24px;">
            <div style="position:absolute;width:600px;height:400px;top:-80px;left:-100px;background:radial-gradient(ellipse,rgba(56,182,255,0.07) 0%,transparent 70%);"></div>
            <div style="position:absolute;width:500px;height:400px;bottom:-80px;right:-80px;background:radial-gradient(ellipse,rgba(123,94,167,0.1) 0%,transparent 70%);"></div>
          </div>

          <div class="iiy-modules-header">
            <span class="iiy-modules-title">Dostƒôpne Modu≈Çy</span>
            <span class="iiy-modules-count">(6)</span>
          </div>

          <div class="iiy-cards-grid">

            <!-- CARD 1: HEXACO-60 ‚Äî cyan -->
            <div class="iiy-card cyan" onclick="startHexacoTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
                  </span>
                </div>
                <span id="hexaco-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">HEXACO-60</div>
              <div class="iiy-card-desc">6 wymiar√≥w osobowo≈õci</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="hexaco-progress-fill" class="iiy-card-progress-fill zero" style="width:0%"></div>
                </div>
                <div id="hexaco-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>15 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>60 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="hexaco-button" class="iiy-card-btn primary">
                Rozpocznij Test <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

            <!-- CARD 2: Enneagram ‚Äî violet -->
            <div class="iiy-card violet" onclick="startEnneagramTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                  </span>
                </div>
                <span id="enneagram-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">Enneagram</div>
              <div class="iiy-card-desc">Motywacja ‚Äî Typy 1‚Äì9</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="enneagram-progress-fill" class="iiy-card-progress-fill zero" style="width:0%"></div>
                </div>
                <div id="enneagram-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>10 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>36 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="enneagram-button" class="iiy-card-btn primary">
                Rozpocznij Test <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

            <!-- CARD 3: Dark Triad ‚Äî pink -->
            <div class="iiy-card pink" onclick="startDarkTriadTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                  </span>
                </div>
                <span id="dark-triad-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">Dark Triad SD3</div>
              <div class="iiy-card-desc">Cie≈Ñ / Ryzyka</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="dark-triad-progress-fill" class="iiy-card-progress-fill zero" style="width:0%; background: linear-gradient(90deg, #c850c0, #ff6b9d); box-shadow: 0 0 8px rgba(200,80,192,0.5)"></div>
                </div>
                <div id="dark-triad-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>8 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>27 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="dark-triad-button" class="iiy-card-btn primary-pink">
                Zbadaj Cie≈Ñ <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

            <!-- CARD 4: Strengths ‚Äî cyan -->
            <div class="iiy-card cyan" onclick="startStrengthsTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
                  </span>
                </div>
                <span id="strengths-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">Strengths Assessment</div>
              <div class="iiy-card-desc">Talenty ‚Äî Top 5</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="strengths-progress-fill" class="iiy-card-progress-fill zero" style="width:0%"></div>
                </div>
                <div id="strengths-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>12 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>48 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="strengths-button" class="iiy-card-btn primary">
                Odkryj Talenty <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

            <!-- CARD 5: Career RIASEC ‚Äî violet -->
            <div class="iiy-card violet" onclick="startCareerTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                  </span>
                </div>
                <span id="career-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">Career Interests</div>
              <div class="iiy-card-desc">Holland Code RIASEC</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="career-progress-fill" class="iiy-card-progress-fill zero" style="width:0%"></div>
                </div>
                <div id="career-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>12 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>48 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="career-button" class="iiy-card-btn primary">
                Odkryj Kod Hollanda <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

            <!-- CARD 6: Values Schwartz ‚Äî violet -->
            <div class="iiy-card violet" onclick="startValuesTest()">
              <div class="iiy-card-glow"></div>
              <div class="iiy-card-top">
                <div class="iiy-card-icon-wrap">
                  <span class="iiy-card-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"/></svg>
                  </span>
                </div>
                <span id="values-status" class="iiy-card-tag">Do Wykonania</span>
              </div>
              <div class="iiy-card-title">Warto≈õci Osobiste</div>
              <div class="iiy-card-desc">Schwartz PVQ ‚Äî Co jest dla Ciebie wa≈ºne</div>
              <div class="iiy-card-progress">
                <div class="iiy-card-progress-track">
                  <div id="values-progress-fill" class="iiy-card-progress-fill zero" style="width:0%"></div>
                </div>
                <div id="values-progress-label" class="iiy-card-progress-label">Nie rozpoczƒôto</div>
              </div>
              <div class="iiy-card-meta">
                <svg width="12" height="12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                <span>10 min</span>
                <span class="iiy-card-meta-dot"></span>
                <span>40 pyta≈Ñ</span>
              </div>
              <div class="iiy-card-divider"></div>
              <button id="values-button" class="iiy-card-btn primary">
                Rozpocznij Test <span class="iiy-card-btn-arrow">‚Ä∫</span>
              </button>
            </div>

          </div>
        </section>

        <!-- Info Section -->
        <div class="mt-20 glass-card rounded-3xl p-10 border border-violet-500/20 relative overflow-hidden">
            <!-- Glow effect -->
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-96 h-96 bg-violet-500/10 rounded-full blur-3xl"></div>
            
            <h2 class="text-3xl md:text-4xl font-bold text-white mb-8 brand-font text-center relative">
                <span class="bg-clip-text text-transparent" style="background-image: linear-gradient(90deg, #6366f1, #0ea5e9, #d946ef); -webkit-background-clip: text;">
                    Jak to dzia≈Ça?
                </span>
            </h2>
            <div class="grid md:grid-cols-3 gap-8 text-slate-300 relative">
                <div class="text-center">
                    <div class="text-5xl mb-4 filter drop-shadow-lg">üìù</div>
                    <h3 class="font-bold text-white mb-3 text-lg">1. Wype≈Çnij Testy</h3>
                    <p class="text-sm text-slate-400 leading-relaxed">Odpowiedz szczerze na pytania w ka≈ºdym te≈õcie. Nie ma z≈Çych odpowiedzi.</p>
                </div>
                <div class="text-center">
                    <div class="text-5xl mb-4 filter drop-shadow-lg">üß†</div>
                    <h3 class="font-bold text-white mb-3 text-lg">2. Otrzymaj Wyniki</h3>
                    <p class="text-sm text-slate-400 leading-relaxed">Natychmiast po zako≈Ñczeniu zobaczysz szczeg√≥≈ÇowƒÖ analizƒô swoich wynik√≥w.</p>
                </div>
                <div class="text-center">
                    <div class="text-5xl mb-4 filter drop-shadow-lg">üé≠</div>
                    <h3 class="font-bold text-white mb-3 text-lg">3. Odkryj Siebie</h3>
                    <p class="text-sm text-slate-400 leading-relaxed">Zbudujemy TwojƒÖ unikalnƒÖ Kartƒô Postaci na podstawie wszystkich test√≥w.</p>
                </div>
            </div>
        </div>

    </main>

    <!-- FOOTER -->
    <footer class="border-t border-white/5 bg-black/30 backdrop-blur-xl mt-24">
        <div class="max-w-7xl mx-auto px-6 py-10 text-center">
            <p class="text-slate-500 text-sm">
               &copy; 2026 <span class="text-brand-primary font-semibold">It Is You</span> - Psycher Engine. Wszystkie prawa zastrze≈ºone.
            </p>
        </div>
    </footer>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';

        const supabaseUrl = 'https://uvzilorpyuqicuwkufky.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InV2emlsb3JweXVxaWN1d2t1Zmt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzNDQzNTAsImV4cCI6MjA4NjkyMDM1MH0.jNIkqASHNl_7WbLq0jBZ86kRDmRP2jzIbI-db9l9teA';
        const supabase = createClient(supabaseUrl, supabaseKey);

        console.log('Dashboard loaded, Supabase client created');
        
        // ============================================
        // THEME TOGGLE FUNCTIONALITY
        // ============================================
        
        // Load theme preference on page load
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('theme');
            const toggle = document.getElementById('theme-toggle');
            
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                if (toggle) toggle.classList.add('light');
            }
            
            console.log('Theme loaded:', savedTheme || 'dark (default)');
        }
        
        // Toggle theme function
        window.toggleTheme = function() {
            const body = document.body;
            const toggle = document.getElementById('theme-toggle');
            const isLightMode = body.classList.contains('light-mode');
            
            if (isLightMode) {
                // Switch to Dark Mode
                body.classList.remove('light-mode');
                toggle.classList.remove('light');
                localStorage.setItem('theme', 'dark');
                console.log('Switched to Dark Mode');
            } else {
                // Switch to Light Mode
                body.classList.add('light-mode');
                toggle.classList.add('light');
                localStorage.setItem('theme', 'light');
                console.log('Switched to Light Mode');
            }
        }
        
        // Load theme immediately (before other scripts)
        loadThemePreference();
        
        // ============================================
        // END THEME TOGGLE
        // ============================================
        
        // Debug: Check localStorage keys
        console.log('LocalStorage keys:', Object.keys(localStorage));
        const supabaseKeys = Object.keys(localStorage).filter(k => k.includes('supabase') || k.includes('sb-'));
        console.log('Supabase-related keys:', supabaseKeys);
        supabaseKeys.forEach(key => {
            const value = localStorage.getItem(key);
            console.log(`  ${key}:`, value?.substring(0, 100) + '...');
        });

        // Check authentication
        async function checkAuth() {
            console.log('Checking auth...');
            // Wait for Supabase to restore session from localStorage
            const { data: { session }, error } = await supabase.auth.getSession();
            
            console.log('Session check:', { session: session ? 'exists' : 'null', error, userId: session?.user?.id });
            
            if (error || !session) {
                console.log('No valid session, redirecting to auth');
                window.location.href = '/auth';
                return false;
            }
            
            console.log('User authenticated:', session.user.id);
            return true;
        }

        // Logout function
        window.logout = function() {
            localStorage.removeItem('user_session');
            localStorage.removeItem('auth_token');
            localStorage.removeItem('has_profile');
            window.location.href = 'https://it-is-you1.vercel.app/';
        }

        // Check if Strengths test is completed
        async function checkStrengthsCompleted() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return false;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'STRENGTHS')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error('Error checking Strengths completion:', error);
                    return false;
                }

                return data && data.length > 0;
            } catch (err) {
                console.error('Error in checkStrengthsCompleted:', err);
                return false;
            }
        }

        // Check if Career test is completed
        async function checkCareerCompleted() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return false;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'CAREER')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error('Error checking Career completion:', error);
                    return false;
                }

                return data && data.length > 0;
            } catch (err) {
                console.error('Error in checkCareerCompleted:', err);
                return false;
            }
        }

        // Check if Values test is completed
        async function checkValuesCompleted() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return false;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'VALUES')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error('Error checking Values completion:', error);
                    return false;
                }

                return data && data.length > 0;
            } catch (err) {
                console.error('Error in checkValuesCompleted:', err);
                return false;
            }
        }

        // Check if Dark Triad test is completed
        async function checkDarkTriadCompleted() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return false;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'DARK_TRIAD')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error('Error checking Dark Triad completion:', error);
                    return false;
                }

                return data && data.length > 0;
            } catch (err) {
                console.error('Error in checkDarkTriadCompleted:', err);
                return false;
            }
        }

        // Check if Enneagram test is completed
        async function checkEnneagramCompleted() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return false;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'ENNEAGRAM')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                if (error) {
                    console.error('Error checking Enneagram completion:', error);
                    return false;
                }

                return data && data.length > 0;
            } catch (err) {
                console.error('Error in checkEnneagramCompleted:', err);
                return false;
            }
        }

        // Check if HEXACO test is completed
        async function checkHexacoCompleted() {
            try {
                // First restore the session from localStorage
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError) {
                    console.error('Session error:', sessionError);
                    return false;
                }
                
                if (!session || !session.user) {
                    console.log('No active session found');
                    return false;
                }

                console.log('Checking test completion for user:', session.user.id);

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('*')
                    .eq('user_id', session.user.id)
                    .eq('test_type', 'HEXACO')
                    .order('completed_at', { ascending: false })
                    .limit(1);

                console.log('Database query result:', { data, error, count: data?.length });

                if (error) {
                    console.error('Error checking test completion:', error);
                    return false;
                }

                const completed = data && data.length > 0;
                console.log('HEXACO test completed:', completed);
                if (completed) {
                    console.log('Test details:', data[0]);
                }
                return completed;
            } catch (err) {
                console.error('Error in checkHexacoCompleted:', err);
                return false;
            }
        }

        // Start Strengths test or view results
        window.startStrengthsTest = async function() {
            const completed = await checkStrengthsCompleted();
            
            if (completed) {
                window.location.href = '/test/strengths/results';
            } else {
                window.location.href = '/test?type=strengths';
            }
        }

        // Start Career test or view results
        window.startCareerTest = async function() {
            const completed = await checkCareerCompleted();
            
            if (completed) {
                window.location.href = '/test/career/results';
            } else {
                window.location.href = '/test?type=career';
            }
        }

        // Start Values test or view results
        window.startValuesTest = async function() {
            const completed = await checkValuesCompleted();
            
            if (completed) {
                window.location.href = '/test/values/results';
            } else {
                window.location.href = '/test?type=values';
            }
        }

        // Start Dark Triad test or view results
        window.startDarkTriadTest = async function() {
            const completed = await checkDarkTriadCompleted();
            
            if (completed) {
                window.location.href = '/test/dark-triad/results';
            } else {
                window.location.href = '/test?type=dark_triad';
            }
        }

        // Start Enneagram test or view results
        window.startEnneagramTest = async function() {
            const completed = await checkEnneagramCompleted();
            
            if (completed) {
                window.location.href = '/test/enneagram/results';
            } else {
                window.location.href = '/test?type=enneagram';
            }
        }

        // Start HEXACO test or view results
        window.startHexacoTest = async function() {
            console.log('HEXACO tile clicked, checking completion status...');
            const completed = await checkHexacoCompleted();
            console.log('Completion check result:', completed);
            
            if (completed) {
                console.log('Test completed, redirecting to results');
                window.location.href = '/test/hexaco/results';
            } else {
                console.log('Test not completed, redirecting to test');
                window.location.href = '/test';
            }
        }

        // Update UI for Strengths test
        async function updateStrengthsUI() {
            const completed = await checkStrengthsCompleted();
            
            const statusEl = document.getElementById('strengths-status');
            const buttonEl = document.getElementById('strengths-button');
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const sFill = document.getElementById('strengths-progress-fill');
                const sLabel = document.getElementById('strengths-progress-label');
                if (sFill) { sFill.style.width = '100%'; sFill.classList.remove('zero'); }
                if (sLabel) { sLabel.textContent = '100% uko≈Ñczono'; }
            }
        }

        // Update UI for Career test
        async function updateCareerUI() {
            const completed = await checkCareerCompleted();
            
            const statusEl = document.getElementById('career-status');
            const buttonEl = document.getElementById('career-button');
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const cFill = document.getElementById('career-progress-fill');
                const cLabel = document.getElementById('career-progress-label');
                if (cFill) { cFill.style.width = '100%'; cFill.classList.remove('zero'); }
                if (cLabel) { cLabel.textContent = '100% uko≈Ñczono'; }
            }
        }

        // Update UI for Values test
        async function updateValuesUI() {
            const completed = await checkValuesCompleted();
            
            const statusEl = document.getElementById('values-status');
            const buttonEl = document.getElementById('values-button');
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const vFill = document.getElementById('values-progress-fill');
                const vLabel = document.getElementById('values-progress-label');
                if (vFill) { vFill.style.width = '100%'; vFill.classList.remove('zero'); }
                if (vLabel) { vLabel.textContent = '100% uko≈Ñczono'; }
            }
        }

        // Update UI for Dark Triad test
        async function updateDarkTriadUI() {
            const completed = await checkDarkTriadCompleted();
            
            const statusEl = document.getElementById('dark-triad-status');
            const buttonEl = document.getElementById('dark-triad-button');
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const dtFill = document.getElementById('dark-triad-progress-fill');
                const dtLabel = document.getElementById('dark-triad-progress-label');
                if (dtFill) { dtFill.style.width = '100%'; dtFill.classList.remove('zero'); }
                if (dtLabel) { dtLabel.textContent = '100% uko≈Ñczono'; }
            }
        }

        // Update UI for Enneagram test
        async function updateEnneagramUI() {
            const completed = await checkEnneagramCompleted();
            
            const statusEl = document.getElementById('enneagram-status');
            const buttonEl = document.getElementById('enneagram-button');
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const enFill = document.getElementById('enneagram-progress-fill');
                const enLabel = document.getElementById('enneagram-progress-label');
                if (enFill) { enFill.style.width = '100%'; enFill.classList.remove('zero'); }
                if (enLabel) { enLabel.textContent = '100% uko≈Ñczono'; }
            }
        }

        // Update UI based on test completion status
        async function updateHexacoUI() {
            console.log('Updating HEXACO UI...');
            const completed = await checkHexacoCompleted();
            console.log('Test completed status:', completed);
            
            const statusEl = document.getElementById('hexaco-status');
            const buttonEl = document.querySelector('#hexaco-button');
            
            console.log('Status element:', statusEl, 'Button element:', buttonEl);
            
            if (completed) {
                if (statusEl) {
                    statusEl.textContent = 'Uko≈Ñczony';
                    statusEl.className = 'iiy-card-tag'; statusEl.style.color = '#38b6ff'; statusEl.style.borderColor = 'rgba(56,182,255,0.35)'; statusEl.style.background = 'rgba(56,182,255,0.1)';
                }
                if (buttonEl) {
                    buttonEl.innerHTML = 'üëÅ Zobacz Wynik';
                    buttonEl.className = 'iiy-card-btn ghost';
                }
                const hFill = document.getElementById('hexaco-progress-fill');
                const hLabel = document.getElementById('hexaco-progress-label');
                if (hFill) { hFill.style.width = '100%'; hFill.classList.remove('zero'); }
                if (hLabel) { hLabel.textContent = '100% uko≈Ñczono'; }
                console.log('UI updated to show completed state');
            } else {
                console.log('Test not completed, keeping default UI');
            }
        }

        // Initialize when DOM is ready
        async function initialize() {
            console.log('Initializing dashboard...');
            const authenticated = await checkAuth();
            if (!authenticated) {
                console.log('Not authenticated, stopping initialization');
                return;
            }
            console.log('Auth successful, updating UI...');
            await updateProfileHero();
            await updateHexacoUI();
            await updateEnneagramUI();
            await updateDarkTriadUI();
            await updateStrengthsUI();
            await updateCareerUI();
            await updateValuesUI();
            console.log('Dashboard initialized successfully');
        }

        // ============================================
        // PROFILE HERO FUNCTIONS
        // ============================================

        // Count all completed tests
        async function getCompletedTestsCount() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    return 0;
                }

                const { data, error } = await supabase
                    .from('user_psychometrics')
                    .select('test_type')
                    .eq('user_id', session.user.id);

                if (error) {
                    console.error('Error counting completed tests:', error);
                    return 0;
                }

                // Get unique test types (in case user retook a test)
                const uniqueTests = [...new Set(data.map(item => item.test_type))];
                return uniqueTests.length;
            } catch (err) {
                console.error('Error in getCompletedTestsCount:', err);
                return 0;
            }
        }

        // Get next recommended test
        async function getNextTest() {
            const tests = [
                { name: 'HEXACO-60', type: 'hexaco', checkFn: checkHexacoCompleted, startFn: 'startHexacoTest' },
                { name: 'Enneagram', type: 'enneagram', checkFn: checkEnneagramCompleted, startFn: 'startEnneagramTest' },
                { name: 'Dark Triad', type: 'dark_triad', checkFn: checkDarkTriadCompleted, startFn: 'startDarkTriadTest' },
                { name: 'Character Strengths', type: 'strengths', checkFn: checkStrengthsCompleted, startFn: 'startStrengthsTest' },
                { name: 'Career Interests', type: 'career', checkFn: checkCareerCompleted, startFn: 'startCareerTest' },
                { name: 'Personal Values', type: 'values', checkFn: checkValuesCompleted, startFn: 'startValuesTest' }
            ];

            for (const test of tests) {
                const completed = await test.checkFn();
                if (!completed) {
                    return test;
                }
            }

            return null; // All tests completed
        }

        // Start next recommended test
        window.startNextTest = async function() {
            const nextTest = await getNextTest();
            if (nextTest) {
                window[nextTest.startFn]();
            }
        }

        // Update Profile Hero UI
        async function updateProfileHero() {
            try {
                const { data: { session }, error: sessionError } = await supabase.auth.getSession();
                
                if (sessionError || !session || !session.user) {
                    console.error('No session for profile hero');
                    return;
                }

                const user = session.user;
                const completedCount = await getCompletedTestsCount();
                const totalTests = 6;
                const percentage = Math.round((completedCount / totalTests) * 100);
                const nextTest = await getNextTest();

                // Update user info
                const userName = user.user_metadata?.full_name || user.email?.split('@')[0] || 'Anonymous';
                const userInitials = userName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                
                document.getElementById('user-name').textContent = userName;
                document.getElementById('user-email').textContent = user.email;
                document.getElementById('user-initials').textContent = userInitials;

                // Update level (based on completed tests)
                const level = completedCount;
                document.getElementById('profile-level').textContent = `Lvl ${level}`;

                // Update completion stats
                document.getElementById('completion-count').textContent = `${completedCount}/${totalTests}`;
                document.getElementById('progress-percentage').textContent = `${percentage}%`;

                // Animate progress bar
                setTimeout(() => {
                    document.getElementById('progress-bar').style.width = `${percentage}%`;
                }, 300);

                // Update SVG progress ring - removed (no ring in new layout)

                // Update Premium badge (placeholder - could be based on actual premium status)
                const isPremium = false; // TODO: Get from database or user metadata
                const badge = document.getElementById('premium-badge');
                const badgeText = document.getElementById('badge-text');
                
                if (isPremium) {
                    badge.style.borderColor = 'rgba(245,158,11,0.6)';
                    badge.style.background = 'rgba(245,158,11,0.1)';
                    badge.style.color = '#FCD34D';
                    badgeText.textContent = '‚ú® Premium';
                } else {
                    badge.style.borderColor = 'rgba(148,163,184,0.3)';
                    badge.style.background = 'rgba(30,41,59,0.5)';
                    badge.style.color = '#94A3B8';
                    badgeText.textContent = 'Free Account';
                }

                // Update Next Step recommendation
                const nextStepCard = document.getElementById('next-step-card');
                const nextStepText = document.getElementById('next-step-text');
                const nextStepButton = document.getElementById('next-step-button');
                const completionMessage = document.getElementById('completion-message');

                if (nextTest) {
                    nextStepCard.style.display = 'flex';
                    completionMessage.style.display = 'none';
                    nextStepText.textContent = `Rekomendowany krok: Wykonaj test "${nextTest.name}"`;
                    nextStepButton.style.display = 'inline-block';
                } else {
                    // All tests completed!
                    nextStepCard.style.display = 'none';
                    completionMessage.style.display = 'flex';
                }

                console.log('Profile Hero updated:', { completedCount, percentage, nextTest: nextTest?.name });
            } catch (err) {
                console.error('Error updating Profile Hero:', err);
            }
        }

        // ============================================
        // END PROFILE HERO FUNCTIONS
        // ============================================

        // Wait for DOM to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }
    </script>

</body>
</html>
